<div class="flex h-screen bg-gray-900 text-white">
  <aside class="w-80 bg-gray-800 p-6 overflow-y-auto">
    <%= render "example_questions" %>

    <hr class="my-6 border-gray-600">
    <%= render "settings_form" %>
  </aside>

  <div data-controller="chat" class="flex flex-col flex-1 p-6">
    <h1 class="text-3xl font-bold mb-4 text-center text-purple-500">HR Chat</h1>

    <div id="messages"
         data-chat-id="<%= @chat_id %>"
         data-chat-target="messages"
         data-action="turbo:before-stream-render->chat#scrollOnAppend"
         class="flex-1 overflow-y-auto mb-4 space-y-4 px-2">
      <%= turbo_frame_tag "messages" do %>
        <%= render partial: "message", collection: @messages, as: :msg %>
      <% end %>
    </div>

    <%= form_with url: chat_index_path, method: :post,
          data: { turbo_frame: "messages",
                  action: "turbo:before-fetch-request->chat#lockInput turbo:submit-end->chat#unlockInput keyup->chat#autoScrollOnTyping" },
          class: "flex space-x-2" do |f| %>
      <%= f.text_field :message, placeholder: "Sorunuzu yazın...",
            data: { chat_target: "input" },
            class: "flex-1 border border-gray-600 bg-gray-800 text-white rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-purple-500" %>
      <%= f.submit "Gönder", class: "bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 shadow-md cursor-pointer" %>
    <% end %>
  </div>
</div>
